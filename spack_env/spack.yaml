################################################################################
# Specification for Packages installed with Spack: HPX with CUDA & APEX, MKL
#
# - choose HPX 1.9.1 to install with APEX without errors
# - ~/.spack/stage/ instead of /tmp folder, to install large CUDA package
# - unified & view for easier configuration
################################################################################

spack:

  specs:
  - >
      hpx@1.10.0
      %clang
      instrumentation=apex
      networking=none
      max_cpu_count=256
      +cuda
      build_type=Debug
      malloc=system
  - intel-oneapi-mkl
    %clang
  - cuda %clang
  - py-matplotlib

  view: true

  concretizer:
    unify: true

  config:
    build_stage:
      - ~/.spack/stage
